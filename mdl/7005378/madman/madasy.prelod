ñ¢‘(Çõ(!ïáÿ<´çÑþˆ¹o÷&áçþxqèëþyztçôwséý=:ôËôó ©ü¸ônßý›óù]ô ìÙô´çÑþœÐRËþyyvËü‹‘ ñCE<¡ø0åÁø¨Mƒø“`ÎE÷ÈŠñO"Î©úVPP…ù“áËAøuiS¡ø0â ƒù“'Ã[úaL‹ôcI±ør'Í¡ôèA‡ø¨ Ò‹úqiV‹ôiE§ú“éEAø4#Æ“ùÑA¡øñäÖ‹ô Ç‹õ±äÖ‹õµ Â™ø¨ Æ“ùÑA‰ø‹`Ì™ùðÐA¥ø´âÔAø1äÖ‹ôfEøõ$ ƒú"Îú’P™ø³£Ô‘ôhF¥ø±PAúQb «úcÅ§ô§Õø”ÖÃ‘ø°å ƒù‘cÁ™÷è Ç‡ôaÏ¡û( Ð¥ù3ª ƒúQ`ÄAù‘¤Ø«ú&Hù6*ÐAù’(F“û&Pù6*ÐAø4äA¥ø¨ Ó‘ø4¢­¥ø´âÔAø4äA¥ø«kE‡ú“é ƒøsçSAø4¢Ì‹ø4â ƒù”êR“ùÑÐA§ú”¤ÎôfI§ú”¤ÎôdÓ©úRgGAø3!Y©ø´ÐA…û5"ÓAø3$Â³ú‘i ƒù0¬Ô‹úh Ì™ù4ê ƒù’iÔAø3$Ì“úuA“ù’iÔAø3+E‡ú“é ƒúÑaÔŸúH Ì“úÑaÔŸúH É­ø°êO¥ôfU­ø°êO¥ôjÖ‹øu'ÒAø3$Õ­ø°êO¥ôdÕ­ø°êO¥ôhU©ôhU©øh!Õ¥út Ã‹ôiÈƒúQVÉù5U“ùÑ"ØAù°bMƒùËhAø«cIøˆ&Á‰ù°g-¡ø1â­ù5¢ ƒøRj-ùñéO¯ôiÐ‹økaI©úoñ¢žU§ø«bEø´"ƒúvfU›ôOñ¢ñ¢
<SETG AGCUV <IUVECTOR 2 #WORD *000000000000*>> 

<SETG ACOPY  #IRSUBR (#DECL ("VALUE" ANY SPACE ANY) (2 ))
> 

<SETG AGC  #IRSUBR (#DECL ("VALUE" ANY SPACE ANY) (2 ))
> 

<BLOCK (<ROOT>)> 

TABLOCK 

<ENDBLOCK> 

<SETG ACONS  #IRSUBR (#DECL ("VALUE" <OR LIST FALSE> SPACE ANY LIST) (3 2 ))
> 

<SETG TABLOCK  #IRSUBR (#DECL ("VALUE" UVECTOR FIX) (1 ))
> 

<SETG APUT  #IRSUBR (#DECL ("VALUE" ANY SPACE STRUCTURED FIX ANY) (3 ))
> 

<SETG ALSTRING  #IRSUBR (#DECL ("VALUE" <OR STRING FALSE> "TUPLE" TUPLE) (-1 ))
> 

<SETG ASTRING  #IRSUBR (#DECL ("VALUE" <OR STRING FALSE> SPACE "TUPLE" TUPLE) (-1 ))
> 

<SETG ALUVECTOR  #IRSUBR (#DECL ("VALUE" <OR UVECTOR FALSE> "TUPLE" TUPLE) (-1 ))
> 

<SETG AUVECTOR  #IRSUBR (#DECL ("VALUE" <OR UVECTOR FALSE> SPACE "TUPLE" TUPLE) (-1 ))
> 

<SETG ALVECTOR  #IRSUBR (#DECL ("VALUE" <OR VECTOR FALSE> "TUPLE" TUPLE) (-1 ))
> 

<SETG AVECTOR  #IRSUBR (#DECL ("VALUE" <OR VECTOR FALSE> SPACE "TUPLE" TUPLE) (-1 ))
> 

<SETG ALISTRING  #IRSUBR (#DECL ("VALUE" <OR STRING FALSE> FIX "OPTIONAL" CHARACTER) (2 1 ))
> 

<SETG AISTRING  #IRSUBR (#DECL ("VALUE" <OR STRING FALSE> SPACE FIX "OPTIONAL" CHARACTER) (3 2 ))
> 

<SETG ALIBYTES  #IRSUBR (#DECL ("VALUE" <OR BYTES FALSE> FIX FIX "OPTIONAL" <PRIMTYPE WORD>) (3 2 ))
> 

<SETG AIBYTES  #IRSUBR (#DECL ("VALUE" <OR BYTES FALSE> SPACE FIX FIX "OPTIONAL" <PRIMTYPE WORD>) (4 3 ))
> 

<SETG ALBYTES  #IRSUBR (#DECL ("VALUE" <OR BYTES FALSE> FIX "TUPLE" TUPLE) (-1 ))
> 

<SETG ABYTES  #IRSUBR (#DECL ("VALUE" <OR BYTES FALSE> SPACE FIX "TUPLE" TUPLE) (-1 ))
> 

<SETG ALIUVECTOR  #IRSUBR (#DECL ("VALUE" <OR UVECTOR FALSE> FIX "OPTIONAL" ANY) (2 1 ))
> 

<SETG AIUVECTOR  #IRSUBR (#DECL ("VALUE" <OR UVECTOR FALSE> SPACE FIX "OPTIONAL" ANY) (3 2 ))
> 

<SETG ALIVECTOR  #IRSUBR (#DECL ("VALUE" <OR VECTOR FALSE> FIX "OPTIONAL" ANY) (2 1 ))
> 

<SETG AIVECTOR  #IRSUBR (#DECL ("VALUE" <OR VECTOR FALSE> SPACE FIX "OPTIONAL" ANY) (3 2 ))
> 

<SETG ALLIST  #IRSUBR (#DECL ("VALUE" <OR LIST FALSE> "TUPLE" TUPLE) (-1 ))
> 

<SETG ALIST  #IRSUBR (#DECL ("VALUE" <OR LIST FALSE> SPACE "TUPLE" TUPLE) (-1 ))
> 

<SETG ALILIST  #IRSUBR (#DECL ("VALUE" <OR LIST FALSE> FIX "OPTIONAL" ANY) (2 1 ))
> 

<SETG AILIST  #IRSUBR (#DECL ("VALUE" <OR LIST FALSE> SPACE FIX "OPTIONAL" ANY) (3 2 ))
> 

<SETG ARELEASE  #IRSUBR (#DECL ("VALUE" ANY SPACE ANY "OPTIONAL" FIX) (2 3 ))
> 

<SETG READA <RSUBR [#CODE ![!] READA #DECL ("VALUE" ANY CHANNEL <OR UVECTOR <PRIMTYPE WORD>> FIX)]>> 

<SETG APGFIND  #IRSUBR (#DECL ("VALUE" <OR FALSE FIX> FIX FIX <UVECTOR [REST WORD]>) (3 ))
> 

<SETG APGGIVE  #IRSUBR (#DECL ("VALUE" FIX FIX FIX <UVECTOR [REST WORD]>) (3 ))
> 

<SETG PAGE-GIVE-TABLE  #IRSUBR (#DECL ("VALUE" <OR ATOM FALSE> <UVECTOR [8 WORD]>) (1 ))
> 

<SETG MADMAN-PAGE-FIND  #IRSUBR (#DECL ("VALUE" <OR FIX FALSE> "OPTIONAL" FIX) (0 1 ))
> 

<SETG MADMAN-PAGE-GIVE  #IRSUBR (#DECL ("VALUE" FIX FIX "OPTIONAL" FIX) (1 2 ))
> 

<AND <GET ESYASS!-PACKAGE OBLIST> <SETG <OR <LOOKUP "F*" <GET OP!-PACKAGE OBLIST>> <INSERT "F*" <GET OP!-PACKAGE OBLIST>>> <CHTYPE 50331648 <LOOKUP "OPCODE" <GET OP!-PACKAGE OBLIST>>>> <SETG <OR <LOOKUP "G*" <GET OP!-PACKAGE OBLIST>> <INSERT "G*" <GET OP!-PACKAGE OBLIST>>> <CHTYPE 58720256 <LOOKUP "OPCODE" <GET OP!-PACKAGE OBLIST>>>>> 

<SETG BCFALSE #FALSE ("OBJECT-POINTS-OUTSIDE-SPACE" 1)> 

<SETG LHFIXUP  #IRSUBR (#DECL ("VALUE" ANY WORD WORD VECTOR) (3 ))
> 

<SETG LFIXUP  #IRSUBR (#DECL ("VALUE" ANY WORD WORD WORD WORD WORD) (5 ))
> 

<SETG LPFIXUP  #IRSUBR (#DECL ("VALUE" ANY ANY UVECTOR VECTOR) (3 ))
> 

<SETG LHPFIX  #IRSUBR (#DECL ("VALUE" WORD WORD <VECTOR [REST WORD]>) (1 ))
> 

<SETG ARVL 60> 

<SETG AREAD-VECTOR <IVECTOR ,ARVL #WORD *000000000000*>> 

<NEWTYPE PBLOCK VECTOR '<VECTOR FIX WORD>> 

<NEWTYPE SPACE VECTOR '<VECTOR <LIST [REST PBLOCK]> WORD WORD WORD LIST VECTOR FIX FIX>> 

<SETG FREE-VECTOR-CHAIN 4> 

<SETG FREE-LIST 5> 

<SETG ASHARE-VECTOR 6> 

<SETG ASHARE-LOCK 7> 

<SETG ASPEC-BITS 8> 

"ERROR IF ATTEMPT TO GROW SPACE" 

<SETG ABIT-NOGROW *400000000000*> 

"ERROR IF ATTEMPT TO RELEASE SOMETHING OUTSIDE SPACE" 

<SETG ABIT-RELERR 17179869184> 

<MANIFEST FREE-VECTOR-CHAIN FREE-LIST ASHARE-VECTOR ASHARE-LOCK ASPEC-BITS ABIT-NOGROW ABIT-RELERR> 

<SETG SPARE-SPACE <CHTYPE [() #WORD *000000000000* #WORD *000000000000* #WORD *000000000000* () [] -1 0] SPACE>> 

<SETG SPARE-LIST '(T)> 

<SETG SPARE-PBLOCKS '()> 

<SETG ALLOC-TABLE <IUVECTOR 8 #WORD *000000000000*>> 

<SETG AUV1 <IUVECTOR 1 #WORD *000000000000*>> 

<SETG AUV2 <IUVECTOR 2 #WORD *000000000000*>> 

<SETG AUV3 <IUVECTOR 3 #WORD *000000000000*>> 

<SETG AUV4 <IUVECTOR 4 #WORD *000000000000*>> 

<SETG AUV6 <IUVECTOR 6 #WORD *000000000000*>> 

<GDECL (SPARE-PBLOCKS) LIST (AUV1 AUV2 AUV3 AUV4 AUV6) UVECTOR (SCRATCH-PAGE) SPACE (AREAD-VECTOR) VECTOR> 

<SETG SPACETYPE  #IRSUBR (#DECL ("VALUE" <OR FALSE FIX> SPACE) (1 ))
> 

<AND <APPLICABLE? ,SPACETYPE> <PRINTTYPE SPACE ,SPACETYPE>> 

<SETG ARESERVE  #IRSUBR (#DECL ("VALUE" <OR FALSE FIX> FIX "OPTIONAL" <UVECTOR [REST WORD]> <OR 'T FALSE>) (1 2 3 ))
> 

<SETG ASHARE  #IRSUBR (#DECL ("VALUE" <OR FALSE SPACE> FIX "OPTIONAL" FIX FIX <OR FIX FALSE>) (1 2 3 4 ))
> 

<SETG ASHARE-RESET  #IRSUBR (#DECL ("VALUE" SPACE SPACE "OPTIONAL" <OR 'T FALSE> <OR 'T FALSE>) (1 2 3 ))
> 

<SETG ARESTORE  #IRSUBR (#DECL ("VALUE" <OR FALSE FIX> SPACE "OPTIONAL" <OR ATOM FALSE>) (1 2 ))
> 

<SETG AFIND  #IRSUBR (#DECL ("VALUE" <OR FALSE SPACE> FIX "OPTIONAL" <OR FALSE SPACE> FIX) (1 2 3 ))
> 

<SETG AGIVE  #IRSUBR (#DECL ("VALUE" SPACE SPACE) (1 ))
> 

<SETG ARESET  #IRSUBR (#DECL ("VALUE" SPACE SPACE "OPTIONAL" <OR FALSE 'T> <OR FALSE 'T>) (1 2 3 ))
> 

<SETG ADD-ALLOC  #IRSUBR (#DECL ("VALUE" <OR ATOM FALSE SPACE> SPACE FIX "OPTIONAL" <OR FIX FALSE>) (2 3 ))
> 

<SETG UPAGES  #IRSUBR (#DECL ("VALUE" WORD SPACE) (1 ))
> 

<SETG AFREE  #IRSUBR (#DECL ("VALUE" <OR ATOM FALSE> SPACE PBLOCK) (2 ))
> 

<SETG APLENGTH  #IRSUBR (#DECL ("VALUE" WORD SPACE) (1 ))
> 

<SETG ALENGTH  #IRSUBR (#DECL ("VALUE" WORD SPACE "OPTIONAL" FIX FIX) (1 2 3 ))
> 

<SETG PLENGTH  #IRSUBR (#DECL ("VALUE" FIX SPACE PBLOCK FIX) (3 ))
> 

<SETG AREAD  #IRSUBR (#DECL ("VALUE" ANY SPACE <OR CHANNEL CHANP ASYLUM> "OPTIONAL" FIX FIX <OR 'T FALSE>) (2 3 4 5 ))
> 

<SETG APRINT  #IRSUBR (#DECL ("VALUE" <OR ASYLUM CHANNEL CHANP> SPACE ANY <OR CHANNEL CHANP ASYLUM> "OPTIONAL" FIX <OR 'T FALSE>) (3 4 5 ))
> 

<SETG BOUNDS-CHECK  #IRSUBR (#DECL ("VALUE" ANY SPACE) (1 ))
> 

<SETG ALEGAL?  #IRSUBR (#DECL ("VALUE" <OR ATOM FALSE> SPACE ANY) (2 ))
> 

<SETG APUTC  #IRSUBR (#DECL ("VALUE" ANY SPACE STRUCTURED FIX ANY) (4 ))
> 

<SETG ASHARE-INIT  #IRSUBR (#DECL ("VALUE" <OR ATOM FALSE SPACE>) (0 ))
> 

<ENDPACKAGE> 

"(c) Copyright 1978 Massachusetts Institute of Technology.  All Rights Reserved." 

<PACKAGE "ASYLUM"> 

<ENTRY ASYLUM MANIAC EXTEND-FILE DATA-ERRORS DATA-NON-FATAL-ERRORS OPEN-DATA-FILE FLUSH-DATA-FILE CLOSE-DATA-FILE RESET-DATA-FILE DATA-UNLOCK ALLOC-UNLOCK ALLOC-MAP DATA-READ-WORD DATA-WRITE-WORD DATA-AUTHOR-WORD DATA-CDATE DATA-RDATE DATA-AUTHOR DATA-USE DATA-PUT DATA-FIND DATA-OPEN DATA-PRINTW DATA-READW DATA-RESERVE DATA-AREAD DATA-IREAD DATA-APRINT DATA-IPRINT DATA-ACCESS DATA-RESET DATA-READB DATA-PRINTB DATA-BLOCK DATA-CHAIN-SALVAGE DATA-CLOSE DATA-DELETE DATA-RENAME DATA-BLOCK-FREE NAMDATA NAME-BLOCK-FREE DATA-EXTEND-PAGES DHLOCK DSLOCK DUNLOCK ITSUNLOCK DATA-LOCK-TRIES DATA-LOCK-SLEEP DIR-INIT MFD-INIT ALLOC-INIT GET-LOC PUT-LOC GET-LOC-X DATREAD DATWRITE DIRMAP MAP-PAGE UNMAP-PAGE NAME-FIND NAME-FIND-DELETE NAME-FIND-ADD PRINTMODE PRINTWMODE READMODE READNRMODE> 

<USE-DEFER "MADMAN" "TENXIO"> 

<SETG P/L 6> 

<SETG DIRID 4> 

<SETG PGWRITE-FLAG T> 

 

<SETG DIRID 4> 

<SETG PLH <* ,P/L 1024>> 

<SETG DATA-EXTEND-PAGES 20> 

<SETG UNMAP-PAGE <RSUBR [#CODE ![!] UNMAP-PAGE #DECL ("VALUE" <OR FALSE 'T> FIX)]>> 

<SETG MAP-PAGE <RSUBR [#CODE ![!] MAP-PAGE #DECL ("VALUE" <OR FALSE 'T> CHANNEL FIX FIX)]>> 

<SETG DIRMAP <RSUBR [#CODE ![!] DIRMAP #DECL ("VALUE" <OR FALSE FIX> ASYLUM FIX)]>> 

<SETG DATREAD <RSUBR [#CODE ![!] DATREAD #DECL ("VALUE" ANY ASYLUM FIX <PRIMTYPE WORD> <OR UVECTOR <PRIMTYPE WORD>>)]>> 

<SETG DATWRITE <RSUBR [#CODE ![!] DATWRITE #DECL ("VALUE" ANY ASYLUM FIX <PRIMTYPE WORD> <OR UVECTOR <PRIMTYPE WORD>>)]>> 

<USE "MADMAN"> 

<SETG HASHPAGE 4> 

<SETG HASHLOC 7> 

<SETG HASHLO 3> 

<SETG HASHFREE 4> 

<SETG LOBUCKET <+ ,HASHFREE 40>> 

<SETG HIBUCKET <+ ,LOBUCKET 256 1>> 

<SETG HASHUV <FREEZE <IUVECTOR 40 0>>> 

<SETG NAME-FIND-ADD  #IRSUBR (#DECL ("VALUE" <OR FIX FALSE> ASYLUM STRING) (2 3 ))
> 

<SETG NAME-FIND  #IRSUBR (#DECL ("VALUE" <OR FALSE FIX> ASYLUM STRING) (2 ))
> 

<SETG NAME-FIND-DELETE  #IRSUBR (#DECL ("VALUE" <OR FALSE FIX> ASYLUM STRING) (2 ))
> 

<SETG DPGLOCK 0> 

<SETG DINITRQ 1> 

<SETG DINITDN 2> 

<SETG ALLOCPTR 3> 

<SETG ALLOCLOCK 4> 

<SETG HIGHADR 5> 

<SETG MAXADR 6> 

<SETG IDCHAIN 2> 

<SETG HIGHID 1> 

<SETG FREEBLOCKS 9> 

<SETG DIRPTRS 10> 

<SETG PGLOCKS 64> 

<SETG DIRMAX <* <- ,PGLOCKS ,DIRPTRS 1> 1024>> 

<SETG OBJSTART 7> 

<SETG OBJLENGTH 4> 

<SETG DIRSIZE </ <- 1023 ,OBJSTART> ,OBJLENGTH>> 

<SETG MAXALLDIF 20> 

<SETG FIRSTALLOC 1021> 

<SETG NAMBLKLEN 4> 

<SETG NAMHDR <IUVECTOR ,NAMBLKLEN #WORD *000000000000*>> 

<PUT ,NAMHDR 1 #WORD *777777777777*> 

<SETG NAMLOCK 0> 

<SETG NAMDATA 1> 

<SETG NAMCHNCDR 2> 

<SETG NAMMISC 3> 

<SETG DATHDRLEN 5> 

<SETG DATHDR <IUVECTOR ,DATHDRLEN #WORD *000000000000*>> 

<SETG DATUSE 0> 

<SETG DATREF 1> 

<SETG DATCHNCDR 2> 

<SETG DATCRT 3> 

<SETG DATLEN 4> 

<SETG DSKCHAN 1> 

<SETG MFDPAGE 2> 

<SETG ALLOCPAGE 3> 

<SETG HASHPAGE 4> 

<SETG DIRPAGEMAP 5> 

<SETG ALLOCFLG 6> 

<SETG PAGEMAP 7> 

<SETG DIRPAGE 8> 

<SETG DSKMFDPAGE 0> 

<SETG DSKALLOCPAGE 1> 

<SETG LRUCOUNT 0> 

"MODE DEFINITIONS" 

<SETG PRINTMODE 1> 

<SETG PRINTWMODE 2> 

<SETG READMODE 3> 

<SETG READNRMODE 4> 

<MANIFEST DATUSE DATCRT DATCHNCDR DATREF DATLEN NAMLOCK NAMDATA NAMCHNCDR NAMUNUSED MAXALLDIF FIRSTALLOC DSKCHAN MFDPAGE ALLOCPAGE DIRPAGEMAP DIRPAGE DSKMFDPAGE DSKALLOCPAGE DIRSIZE DIRMAX OBJSTART OBJLENGTH PGLOCKS LASTDIR HIGHADR MAXADR IDCHAIN HIGHID ALLOCFLG P/L PLH DIRID DIRPTRS DINITRQ DINITDN DPGLOCK ALLOCLOCK ALLOCPTR PRINTMODE PRINTWMODE READMODE READNRMODE> 

<NEWTYPE ASYLUM VECTOR '<<PRIMTYPE VECTOR> CHANNEL FIX FIX <OR UVECTOR FIX> UVECTOR FIX UVECTOR VECTOR>> 

<NEWTYPE MANIAC VECTOR '<<PRIMTYPE VECTOR> FIX FIX FIX FIX FIX FIX <OR FIX STRING> FIX>> 

<PRINTTYPE MANIAC <FUNCTION (X) <PRINC "#MANIAC "> <PRINC <COND (<==? <7 .X> 0> <1 .X>) (<7 .X>)>> <PRINC " ">>> 

<GDECL (MODEVCT) <VECTOR [REST STRING FIX]> (DATA-READ-WORD DATA-WRITE-WORD DATA-AUTHOR-WORD) WORD (SPARE-IDS) <VECTOR [REST <OR MANIAC FALSE>]> (DUV1) <UVECTOR [1 WORD]> (DUV2) <UVECTOR [2 WORD]> (NAMUV NAMZUV DATUV) <UVECTOR [REST WORD]> (DATA-NON-FATAL-ERRORS) <UVECTOR [REST FIX]> (DATA-ERRORS) <VECTOR [REST STRING]>> 

<SETG MODEVCT <VECTOR "PRINT" ,PRINTMODE "READ" ,READMODE "PRINTW" ,PRINTWMODE "READNR" ,READNRMODE>> 

<SETG DATA-READ-WORD <SETG DATA-AUTHOR-WORD <SETG DATA-WRITE-WORD #WORD *000000000000*>>> 

<SETG SPARE-IDS <IVECTOR 2 <>>> 

<SETG DUV1 <IUVECTOR 1 #WORD *000000000000*>> 

<SETG DUV2 <IUVECTOR 2 #WORD *000000000000*>> 

<SETG NAMUV <IUVECTOR ,NAMBLKLEN #WORD *000000000000*>> 

<SETG NAMZUV <IUVECTOR ,NAMBLKLEN #WORD *000000000000*>> 

<PUT ,NAMZUV 1 #WORD *777777777777*> 

<SETG DATUV <IUVECTOR ,DATHDRLEN #WORD *000000000000*>> 

<SETG DATA-ERRORS ["CANT OPEN DATA FILE" "ILLEGAL FILE NAME" "ILLEGAL ASYLUM" "MODE NOT AVAILABLE" "FILE LOCKED" "ALLOCATOR LOCKED" "CANT GET ALLOCATION PAGE" "FILE NOT FOUND" "DATA AREA FULL OR LOCKED" "ATTEMPT TO ACCESS PAST END OF FILE" "ATTEMPT TO READ PAST END OF FILE" "ATTEMPT TO FLUSH LOCKED DIRECTORY" "MEANINGLESS ARGS" "ATTEMPT TO ALLOCATE ON READ ONLY MANIAC" "DEALLOCATION OUT OF RANGE" "INTERNAL INCONSISTENCY" "NOT LOCKED" "PAGE AREA FULL"]> 

<SETG DATA-NON-FATAL-ERRORS ![5 6 9 12 15 17!]> 

<SETG OPEN-DATA-FILE  #IRSUBR (#DECL ("VALUE" <OR ASYLUM FALSE> STRING "OPTIONAL" <OR ASYLUM FALSE> FIX FIX) (1 2 3 4 ))
> 

<SETG FLUSH-DATA-FILE  #IRSUBR (#DECL ("VALUE" ASYLUM ASYLUM "OPTIONAL" <OR FALSE 'T>) (1 2 ))
> 

<SETG CLOSE-DATA-FILE  #IRSUBR (#DECL ("VALUE" <OR ATOM CHANNEL> ASYLUM) (1 ))
> 

<SETG RESET-DATA-FILE  #IRSUBR (#DECL ("VALUE" <OR ASYLUM FALSE> ASYLUM) (1 ))
> 

<SETG DATA-PUT  #IRSUBR (#DECL ("VALUE" ANY ASYLUM FIX <UVECTOR [4 WORD]>) (3 ))
> 

<SETG DATA-FIND  #IRSUBR (#DECL ("VALUE" ANY ASYLUM FIX "OPTIONAL" <OR 'T FALSE>) (2 3 ))
> 

 

<SETG DATA-OPEN  #IRSUBR (#DECL ("VALUE" <OR FALSE MANIAC> <OR STRING FIX> ASYLUM <OR FIX STRING>) (3 ))
> 

<SETG DATA-CDATE  #IRSUBR (#DECL ("VALUE" ANY ASYLUM MANIAC "OPTIONAL" FIX) (2 3 ))
> 

<SETG DATA-RDATE  #IRSUBR (#DECL ("VALUE" ANY ASYLUM MANIAC) (2 ))
> 

<SETG DATA-USE  #IRSUBR (#DECL ("VALUE" ANY ASYLUM MANIAC) (2 ))
> 

<SETG DATA-AUTHOR  #IRSUBR (#DECL ("VALUE" ANY ASYLUM MANIAC) (2 ))
> 

<SETG DATA-PRINTW  #IRSUBR (#DECL ("VALUE" <OR FALSE MANIAC> ASYLUM <OR STRING MANIAC FALSE FIX> <PRIMTYPE WORD>) (3 ))
> 

<SETG DATA-READW  #IRSUBR (#DECL ("VALUE" ANY ASYLUM <OR FALSE STRING FIX>) (2 ))
> 

<SETG DATA-RESERVE  #IRSUBR (#DECL ("VALUE" <OR FALSE FIX> ASYLUM FIX) (2 ))
> 

<SETG ALLOC-MAP  #IRSUBR (#DECL ("VALUE" <OR ATOM FALSE ASYLUM> ASYLUM) (1 ))
> 

<SETG DATA-AREAD  #IRSUBR (#DECL ("VALUE" ANY ASYLUM <OR STRING FIX> SPACE "OPTIONAL" FIX <OR 'T FALSE>) (3 4 5 ))
> 

<SETG DATA-IREAD  #IRSUBR (#DECL ("VALUE" ANY ASYLUM MANIAC SPACE "OPTIONAL" FIX <OR FALSE 'T>) (3 4 5 ))
> 

<SETG DATA-APRINT  #IRSUBR (#DECL ("VALUE" <OR FALSE MANIAC> ASYLUM <OR STRING FIX> SPACE ANY "OPTIONAL" <OR 'T FALSE>) (4 5 ))
> 

<SETG DATA-IPRINT  #IRSUBR (#DECL ("VALUE" <OR FALSE MANIAC> ASYLUM MANIAC SPACE ANY "OPTIONAL" <OR FALSE 'T>) (4 5 ))
> 

<SETG DATA-ACCESS  #IRSUBR (#DECL ("VALUE" <OR !<FALSE FIX!> MANIAC> ASYLUM MANIAC FIX) (3 ))
> 

<SETG DATA-RESET  #IRSUBR (#DECL ("VALUE" <OR MANIAC !<FALSE FIX!>> ASYLUM MANIAC) (2 ))
> 

<SETG DATA-READB  #IRSUBR (#DECL ("VALUE" <OR FIX !<FALSE FIX!>> ASYLUM MANIAC <OR UVECTOR <PRIMTYPE WORD>> "OPTIONAL" FIX <OR 'T FALSE> <OR 'T FALSE>) (3 4 5 6 ))
> 

<SETG DATA-PRINTB  #IRSUBR (#DECL ("VALUE" <OR FIX !<FALSE FIX!>> ASYLUM MANIAC <OR UVECTOR <PRIMTYPE WORD>> "OPTIONAL" FIX) (3 4 ))
> 

<SETG DATA-BLOCK  #IRSUBR (#DECL ("VALUE" <OR FALSE FIX> ASYLUM MANIAC FIX) (3 ))
> 

<SETG DATA-CHAIN-SALVAGE  #IRSUBR (#DECL ("VALUE" ATOM ASYLUM) (1 ))
> 

<SETG DATA-BLOCK-FREE  #IRSUBR (#DECL ("VALUE" ANY ASYLUM FIX "OPTIONAL" <OR 'T FALSE>) (2 3 ))
> 

<SETG DATA-CLOSE  #IRSUBR (#DECL ("VALUE" <OR MANIAC !<FALSE FIX!>> ASYLUM MANIAC) (2 ))
> 

<SETG DATA-DELETE  #IRSUBR (#DECL ("VALUE" ANY ASYLUM <OR STRING FIX>) (2 ))
> 

<SETG NAME-BLOCK-FREE  #IRSUBR (#DECL ("VALUE" <OR FALSE FIX> ASYLUM <OR FALSE STRING FIX>) (2 ))
> 

<SETG DATA-RENAME  #IRSUBR (#DECL ("VALUE" <OR FALSE MANIAC> ASYLUM <OR FIX FALSE STRING> <OR FIX FALSE STRING>) (3 ))
> 

<SETG DATA-UNLOCK  #IRSUBR (#DECL ("VALUE" ANY ASYLUM <OR FALSE STRING FIX>) (2 ))
> 

<SETG ALLOC-UNLOCK  #IRSUBR (#DECL ("VALUE" ANY ASYLUM) (1 ))
> 

"New version:  copies file (we assume only one person is doing any writes,
which is currently valid in the case of comsys), adding specified # of
pages at end, then updates allocator and such." 

<SETG EXTEND-FILE  #IRSUBR (#DECL ("VALUE" <OR ASYLUM FALSE> ASYLUM FIX "OPTIONAL" <UVECTOR [REST FIX]>) (3 2 ))
> 

 

<SETG DLOCKTABLE <REST <FREEZE <IUVECTOR 50 #WORD *000000000000*>> 50>> 

<SETG DLTBLCOPY <REST <FREEZE <IUVECTOR 50 #WORD *000000000000*>> 50>> 

<SETG CCTABLE <REST <FREEZE <IUVECTOR 30 #WORD *000000000000*>> 30>> 

<SET DLENMAX <LENGTH <TOP ,DLOCKTABLE>>> 

<SETG DATA-LOCK-TRIES 10> 

<SETG DATA-LOCK-SLEEP 500> 

<SETG ITSUNLOCK  #IRSUBR (#DECL ("VALUE" 'T) (0 ))
> 

<SETG DHLOCK  #IRSUBR (#DECL ("VALUE" <OR <PRIMTYPE WORD> FALSE> <PRIMTYPE WORD>) (1 ))
> 

<SETG DIR-INIT  #IRSUBR (#DECL ("VALUE" 'T FIX) (1 ))
> 

<SETG MFD-INIT  #IRSUBR (#DECL ("VALUE" <OR FALSE 'T> <PRIMTYPE VECTOR>) (1 ))
> 

<SETG DUNLOCK  #IRSUBR (#DECL ("VALUE" <OR FALSE <PRIMTYPE WORD>> <PRIMTYPE WORD>) (1 0 ))
> 

<SETG DSLOCK  #IRSUBR (#DECL ("VALUE" <OR <PRIMTYPE WORD> FALSE> <PRIMTYPE WORD>) (1 ))
> 

<AND <L? ,MUDDLE 100> <NOT <GASSIGNED? SUBRFY>> <APPLICABLE? ,DHLOCK> <FREEZE ,DHLOCK>> 

<SETG GET-LOC  #IRSUBR (#DECL ("VALUE" UVECTOR <PRIMTYPE WORD> UVECTOR) (2 ))
> 

<SETG PUT-LOC  #IRSUBR (#DECL ("VALUE" <PRIMTYPE WORD> <PRIMTYPE WORD> UVECTOR) (2 ))
> 

<SETG GET-LOC-X  #IRSUBR (#DECL ("VALUE" UVECTOR <PRIMTYPE WORD> UVECTOR FIX) (2 ))
> 

<ENDPACKAGE> 
